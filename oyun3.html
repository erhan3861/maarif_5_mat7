<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√∂n√º≈ü√ºm ƒ∞stasyonu - ƒ∞ki ƒ∞≈ülemli Kurallar</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #eceff1;
            color: #37474f;
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            background-image: linear-gradient(135deg, #eceff1 0%, #cfd8dc 100%);
        }

        /* Arkaplan Efekti */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background-image:
                linear-gradient(45deg, #b0bec5 25%, transparent 25%, transparent 75%, #b0bec5 75%, #b0bec5),
                linear-gradient(45deg, #b0bec5 25%, transparent 25%, transparent 75%, #b0bec5 75%, #b0bec5);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            opacity: 0.05;
        }

        /* Top HUD */
        .hud-top {
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            z-index: 10;
        }

        .hud-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #546e7a;
            color: #37474f;
            padding: 10px 25px;
            cursor: pointer;
            text-decoration: none;
            font-family: 'Orbitron', sans-serif;
            transition: 0.3s;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hud-btn:hover {
            background: #546e7a;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(84, 110, 122, 0.3);
        }

        .btn-code {
            border-color: #0984e3;
            color: #0984e3;
        }

        .btn-code:hover {
            background: #0984e3;
            color: white;
        }

        /* Scene */
        .scene-container {
            width: 100%;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 5;
        }

        .machine-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
            position: relative;
            background: rgba(255, 255, 255, 0.4);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .conveyor {
            height: 10px;
            width: 100px;
            background: #90a4ae;
            position: relative;
            border-radius: 5px;
        }

        .machine-body {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, #455a64, #263238);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #80cbc4;
            font-family: 'Orbitron';
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 4px solid #546e7a;
            position: relative;
            z-index: 2;
        }

        .machine-screen {
            background: #000;
            color: #00e676;
            padding: 10px;
            border-radius: 5px;
            font-size: 1.5rem;
            margin-bottom: 10px;
            width: 80%;
            text-align: center;
            border: 1px solid #37474f;
        }

        .gear {
            font-size: 3rem;
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        .item {
            width: 50px;
            height: 50px;
            background: #fff;
            border: 2px solid #546e7a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            position: absolute;
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        @keyframes moveIn {
            0% {
                left: -60px;
                opacity: 0;
            }

            100% {
                left: 40px;
                opacity: 1;
            }
        }

        @keyframes moveOut {
            0% {
                left: 240px;
                opacity: 0;
                transform: scale(0.5);
            }

            100% {
                left: 340px;
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Question Panel */
        .question-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px 50px;
            border-radius: 20px;
            text-align: center;
            min-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 1);
        }

        .table-display {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: inline-block;
            text-align: left;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .data-row {
            display: flex;
            gap: 20px;
            padding: 8px 0;
            border-bottom: 1px solid #eceff1;
            font-size: 1.1rem;
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .lbl {
            font-weight: bold;
            color: #546e7a;
            width: 60px;
        }

        .val {
            color: #263238;
            font-family: 'Orbitron';
        }

        .input-area {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }

        .answer-input {
            background: #fff;
            border: 2px solid #b0bec5;
            color: #37474f;
            font-size: 1.5rem;
            padding: 10px 15px;
            width: 100px;
            font-family: 'Orbitron', serif;
            text-align: center;
            border-radius: 10px;
            outline: none;
            transition: 0.3s;
        }

        .answer-input:focus {
            border-color: #00b894;
        }

        .btn-predict {
            background: linear-gradient(45deg, #546e7a, #37474f);
            color: #fff;
            border: none;
            padding: 10px 25px;
            font-size: 1.2rem;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Orbitron', serif;
            border-radius: 50px;
            transition: 0.3s;
            box-shadow: 0 4px 10px rgba(55, 71, 79, 0.3);
        }

        .btn-predict:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(55, 71, 79, 0.4);
            background: linear-gradient(45deg, #607d8b, #455a64);
        }

        .progress-bar {
            width: 60%;
            height: 12px;
            background: rgba(38, 50, 56, 0.1);
            border-radius: 10px;
            margin-top: 30px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00b894, #26a69a);
            transition: width 0.5s;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #fff;
            padding: 40px;
            text-align: center;
            border-radius: 20px;
            max-width: 600px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #b2bec3;
            cursor: pointer;
        }

        .close-btn:hover {
            color: #2d3436;
        }

        .solution-box {
            background: #e0f2f1;
            border-left: 6px solid #009688;
            padding: 20px;
            text-align: left;
            margin: 20px 0;
            color: #00695c;
            border-radius: 0 10px 10px 0;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .next-btn {
            background: linear-gradient(45deg, #009688, #00796b);
            color: white;
            padding: 12px 35px;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 150, 136, 0.4);
            transition: 0.3s;
        }

        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 150, 136, 0.6);
        }

        /* Code Block */
        .code-block {
            background: #2d3436;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            font-family: 'Consolas', monospace;
            font-size: 1rem;
            margin: 20px 0;
            border-left: 5px solid #0984e3;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .kw {
            color: #ff79c6;
            font-weight: bold;
        }

        .fn {
            color: #8be9fd;
        }

        .str {
            color: #f1fa8c;
        }

        .com {
            color: #6272a4;
            font-style: italic;
        }
    </style>
</head>

<body>

    <div class="bg-pattern"></div>

    <div class="hud-top">
        <a href="index.html" class="hud-btn">‚ùÆ VADƒ∞YE D√ñN</a>
        <div
            style="font-size:1.4rem; color:#37474f; font-family:'Orbitron'; font-weight:bold; text-shadow:1px 1px 0 white;">
            D√ñN√ú≈û√úM ƒ∞STASYONU</div>
        <button onclick="openModal('codeModal')" class="hud-btn btn-code">üíª KODLA</button>
    </div>

    <div class="scene-container">

        <div class="machine-container">
            <div class="conveyor"></div>
            <div class="machine-body">
                <div class="machine-screen" id="machine-formula">?</div>
                <div class="gear">‚öôÔ∏è</div>
            </div>
            <div class="conveyor"></div>

            <!-- Animation Elements -->
            <div id="anim-area"
                style="position: absolute; width: 100%; height: 100%; top:0; left:0; pointer-events: none;"></div>
        </div>

        <div class="question-panel">
            <div style="color:#546e7a; font-size:1.2rem; margin-bottom:15px; font-weight:bold;">Girdi / √áƒ±ktƒ± Tablosu
            </div>
            <div class="table-display" id="data-table">
                <!-- Rows -->
            </div>

            <div style="color:#37474f; margin-top:10px;">Sonu√ß ne olmalƒ±?</div>
            <div class="input-area" id="input-area">
                <div style="font-size:1.5rem; font-weight:bold; color:#455a64; margin-right:10px;" id="q-input-val">
                    Girdi: 5 -></div>
                <input type="number" class="answer-input" id="user-ans" placeholder="?">
                <button class="btn-predict" onclick="checkAnswer()">D√ñN√ú≈ûT√úR</button>
            </div>
        </div>

        <div class="progress-bar">
            <div class="fill" id="p-bar"></div>
        </div>

    </div>

    <!-- Solution Modal -->
    <div class="modal" id="solutionModal">
        <div class="modal-content">
            <h2 style="color:#009688; margin:0; font-family:'Orbitron';">üõ†Ô∏è Sƒ∞STEM ANALƒ∞Zƒ∞</h2>
            <div class="solution-box" id="solution-text"></div>
            <button class="next-btn" onclick="nextLevel()">SONRAKƒ∞ SEVƒ∞YE ‚ùØ</button>
        </div>
    </div>

    <!-- Code Modal -->
    <div class="modal" id="codeModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('codeModal')">&times;</span>
            <h2 style="color:#0984e3; margin-top:0; font-family:'Orbitron';">üíª KOD LABORATUVARI</h2>
            <p style="color:#636e72;">Bir makinenin √ßalƒ±≈üma kuralƒ±nƒ± "Fonksiyon" olarak yazarƒ±z.</p>
            <div class="code-block" id="code-content">
                <span class="kw">function</span> <span class="fn">donustur</span>(girdi) {<br>
                &nbsp;&nbsp;<span class="com">// Kural: <span id="code-rule-text">3 katƒ±nƒ±n 2 fazlasƒ±</span></span><br>
                &nbsp;&nbsp;<span class="kw">let</span> cikti = (girdi * <span class="str" id="code-mul">3</span>) +
                <span class="str" id="code-add">2</span>;<br>
                &nbsp;&nbsp;<span class="kw">return</span> cikti;<br>
                }
            </div>
            <a href="https://app.talent14.com/codeEditor" target="_blank" class="next-btn"
                style="text-decoration:none; display:inline-block; margin-top:10px;">EDƒ∞T√ñR√ú A√á</a>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2 style="color:#009688; font-family:'Orbitron';">Sƒ∞STEM KALƒ∞BRE EDƒ∞LDƒ∞!</h2>
            <p style="color:#555; font-size:1.1rem;">T√ºm d√∂n√º≈ü√ºm kurallarƒ± ba≈üarƒ±yla √ß√∂z√ºld√º.</p>
            <div style="font-size:4rem; margin:20px;">‚ôªÔ∏è</div>
            <button class="next-btn" onclick="window.location.href='index.html'">VADƒ∞YE D√ñN</button>
        </div>
    </div>

    <script>
        // Kural: y = ax + b
        const levels = [
            { a: 2, b: 0, text: "2 katƒ±" },
            { a: 3, b: 1, text: "3 katƒ±nƒ±n 1 fazlasƒ±" },
            { a: 2, b: 5, text: "2 katƒ±nƒ±n 5 fazlasƒ±" },
            { a: 4, b: -2, text: "4 katƒ±nƒ±n 2 eksiƒüi" },
            { a: 5, b: 3, text: "5 katƒ±nƒ±n 3 fazlasƒ±" }
        ];

        let currentLvl = 0;
        let isLocked = false;

        function startGame() {
            currentLvl = 0;
            loadLevel();
        }

        function loadLevel() {
            if (currentLvl >= levels.length) {
                document.getElementById('winModal').style.display = 'flex';
                return;
            }

            const L = levels[currentLvl];
            const table = document.getElementById('data-table');
            table.innerHTML = "";

            // Show 3 examples
            for (let i = 1; i <= 3; i++) {
                let y = L.a * i + L.b;
                table.innerHTML += `
                    <div class="data-row">
                        <span class="lbl">Girdi:</span> <span class="val">${i}</span>
                        <span class="lbl" style="margin-left:20px;">----></span>
                        <span class="lbl">√áƒ±ktƒ±:</span> <span class="val">${y}</span>
                    </div>`;
            }

            // Question input
            let qInput = 4; // Ask for 4th
            document.getElementById('q-input-val').innerText = `Girdi: ${qInput} ---->`;
            document.getElementById('user-ans').value = "";
            document.getElementById('machine-formula').innerText = "?";

            // Update Code Modal Logic
            document.getElementById('code-rule-text').innerText = L.text;
            document.getElementById('code-mul').innerText = L.a;
            document.getElementById('code-add').innerText = (L.b >= 0 ? L.b : `(${L.b})`);

            document.getElementById('p-bar').style.width = ((currentLvl / levels.length) * 100) + "%";
            isLocked = false;
        }

        function checkAnswer() {
            if (isLocked) return;

            const L = levels[currentLvl];
            const qInput = 4;
            const correctAns = L.a * qInput + L.b;
            const userAns = parseInt(document.getElementById('user-ans').value);

            if (userAns === correctAns) {
                isLocked = true;

                // Animate machine
                document.getElementById('machine-formula').innerText = `${L.a}x` + (L.b >= 0 ? `+${L.b}` : `${L.b}`);

                let solHtml = `<strong>‚öôÔ∏è Kural Tespiti:</strong> ${L.text}<br>`;
                solHtml += `Makine giren sayƒ±yƒ± <strong>${L.a}</strong> ile √ßarpƒ±p <strong>${Math.abs(L.b)}</strong> ${L.b >= 0 ? 'ekliyor' : '√ßƒ±karƒ±yor'}.<br><br>`;
                solHtml += `<strong>Hesaplama:</strong><br>`;
                solHtml += `(${L.a} x ${qInput}) ${L.b >= 0 ? '+' : '-'} ${Math.abs(L.b)} = <strong>${correctAns}</strong>`;

                document.getElementById('solution-text').innerHTML = solHtml;
                setTimeout(() => { openModal('solutionModal'); }, 1000);
            } else {
                // Shake
                const inputArea = document.getElementById('input-area');
                inputArea.style.transform = "translateX(5px)";
                setTimeout(() => inputArea.style.transform = "translateX(-5px)", 50);
                setTimeout(() => inputArea.style.transform = "translateX(5px)", 100);
                setTimeout(() => inputArea.style.transform = "translateX(0)", 150);
            }
        }

        function nextLevel() {
            closeModal('solutionModal');
            currentLvl++;
            loadLevel();
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        // Enter key support
        document.getElementById('user-ans').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkAnswer();
        });

        window.onload = startGame;
    </script>
</body>

</html>
